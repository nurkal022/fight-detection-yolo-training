#!/bin/bash
# –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ –≤ –Ω–æ–≤–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏

echo "=========================================="
echo "–ü–£–ë–õ–ò–ö–ê–¶–ò–Ø –í –ù–û–í–û–ú –†–ï–ü–û–ó–ò–¢–û–†–ò–ò"
echo "=========================================="
echo ""

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ remote
echo "üìã –¢–µ–∫—É—â–∏–π remote:"
git remote -v
echo ""

# –ó–∞–ø—Ä–æ—Å –Ω–æ–≤–æ–≥–æ URL
read -p "–í–≤–µ–¥–∏—Ç–µ URL –Ω–æ–≤–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä: https://github.com/username/repo.git): " NEW_REPO_URL

if [ -z "$NEW_REPO_URL" ]; then
    echo "‚ùå URL –Ω–µ –≤–≤–µ–¥–µ–Ω. –í—ã—Ö–æ–¥."
    exit 1
fi

echo ""
echo "–í—ã–±—Ä–∞–Ω–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: $NEW_REPO_URL"
read -p "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å? (y/n): " CONFIRM

if [ "$CONFIRM" != "y" ]; then
    echo "–û—Ç–º–µ–Ω–µ–Ω–æ."
    exit 0
fi

# –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–π remote
echo ""
echo "üóëÔ∏è  –£–¥–∞–ª—è—é —Å—Ç–∞—Ä—ã–π remote..."
git remote remove origin 2>/dev/null || echo "–°—Ç–∞—Ä—ã–π remote –Ω–µ –Ω–∞–π–¥–µ–Ω"

# –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π remote
echo "‚ûï –î–æ–±–∞–≤–ª—è—é –Ω–æ–≤—ã–π remote..."
git remote add origin "$NEW_REPO_URL"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
echo ""
echo "üìä –°—Ç–∞—Ç—É—Å Git:"
git status --short | head -10

# –î–æ–±–∞–≤–∏—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã
echo ""
echo "üì¶ –î–æ–±–∞–≤–ª—è—é —Ñ–∞–π–ª—ã..."
git add .

# –ö–æ–º–º–∏—Ç
echo ""
read -p "–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–º–º–∏—Ç–∞ (–∏–ª–∏ Enter –¥–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ): " COMMIT_MSG
if [ -z "$COMMIT_MSG" ]; then
    COMMIT_MSG="Add YOLO training project with dataset"
fi

git commit -m "$COMMIT_MSG"

# –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≤–µ—Ç–∫–∞ main
echo ""
echo "üåø –ü—Ä–æ–≤–µ—Ä—è—é –≤–µ—Ç–∫—É..."
git branch -M main

# –û—Ç–ø—Ä–∞–≤–∏—Ç—å
echo ""
echo "üöÄ –û—Ç–ø—Ä–∞–≤–ª—è—é –≤ –Ω–æ–≤—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π..."
echo "–≠—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç –∏–∑-–∑–∞ —Ä–∞–∑–º–µ—Ä–∞ –¥–∞—Ç–∞—Å–µ—Ç–∞ (~173MB)..."
git push -u origin main

echo ""
echo "‚úÖ –ì–æ—Ç–æ–≤–æ!"
echo "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: $NEW_REPO_URL"

